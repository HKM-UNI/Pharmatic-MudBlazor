@page "/composiciones"
@using Pharmatic.DTOs;
@using Pharmatic.Services;
@layout MainLayout
@inject ProductCompositionService _pcompService
@inject NavigationManager _navigationManager
@inject SharedData _data


<MudPaper>
    <MudAppBar Elevation="0" Fixed="false" Style="border-radius: 15px; position: sticky; top: 0;">
        <MudTextField @bind-Value="@search_text" Placeholder="Buscar" Variant="Variant.Outlined" Adornment="Adornment.Start"
                      AdornmentIcon="@CustomIcons.Search" Margin="Margin.Dense" />

        <MudSpacer />

        <MudButton Class="rounded-pill" Variant="Variant.Filled" ButtonType="ButtonType.Submit" Size="Size.Large"
                   Color="Color.Primary" OnClick="AddClicked">
            Agregar
        </MudButton>
    </MudAppBar>
    <MudGrid Class="pa-3" Spacing="1">
        @foreach (var c in comp_list)
        {
            <MudItem xs="3">
                <MudCard Style="background-color: #F5F5F5">

                </MudCard>
            </MudItem>
        }
    </MudGrid>

</MudPaper>

@code {
    private string search_text = string.Empty;
    private List<ProductCompositionDTO> comp_list = new List<ProductCompositionDTO>();

    protected override async Task OnInitializedAsync()
    {

        _data.Items = new List<BreadcrumbItem>
        {
            new BreadcrumbItem("Home", href: "/dashboard", icon: Icons.Material.Filled.Home),
            new BreadcrumbItem("Composiciones", href: null, disabled: true),
        };
    }

    private void AddClicked()
    {
        _navigationManager.NavigateTo("/composiciones/agregar");
    }

    private void EditClicked(string id)
    {
        _navigationManager.NavigateTo("/composiciones/editar/" + id);
    }

}
